<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF OCR and Translation</title>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <h2>Upload PDF for OCR and Translation</h2>
    
    <input type="file" id="pdf-upload" accept=".pdf" />
    <button onclick="processFile()">Process File</button>

    <h3>Extracted Hindi Text</h3>
    <pre id="hindi-text"></pre>
    
    <h3>Translated English Text</h3>
    <pre id="english-text"></pre>

    <h3>Summaries</h3>
    <h4>Hindi Summary:</h4>
    <pre id="hindi-summary"></pre>

    <h4>English Summary:</h4>
    <pre id="english-summary"></pre>

    <button onclick="generatePDF()">Download PDF</button>

    <script>
        let hindiText = "";
        let englishText = "";

        // Process PDF
        async function processFile() {
            const file = document.getElementById("pdf-upload").files[0];
            if (!file) return alert("Please upload a PDF file");

            // OCR Extraction (Tesseract.js)
            const { createWorker } = Tesseract;
            const worker = createWorker();
            await worker.load();
            await worker.loadLanguage("hin");
            await worker.initialize("hin");
            const { data: { text } } = await worker.recognize(file);
            await worker.terminate();
            
            hindiText = text;
            document.getElementById("hindi-text").textContent = hindiText;
            
            // Translate to English (Google Translate API via JavaScript)
            const translate = async (text, targetLang) => {
                const response = await fetch(`https://translation.googleapis.com/language/translate/v2?key=YOUR_GOOGLE_API_KEY`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        q: text,
                        target: targetLang
                    })
                });
                const data = await response.json();
                return data.data.translations[0].translatedText;
            };
            
            englishText = await translate(hindiText, "en");
            document.getElementById("english-text").textContent = englishText;

            // Basic Summarization (just shortening text here for example)
            document.getElementById("hindi-summary").textContent = hindiText.substring(0, 500) + "...";
            document.getElementById("english-summary").textContent = englishText.substring(0, 500) + "...";
        }

        // Generate PDF with jsPDF
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text("Hindi Text: " + hindiText, 10, 10);
            doc.text("Translated English Text: " + englishText, 10, 30);
            doc.text("Hindi Summary: " + document.getElementById("hindi-summary").textContent, 10, 50);
            doc.text("English Summary: " + document.getElementById("english-summary").textContent, 10, 70);
            doc.save("translated_content.pdf");
        }
    </script>
</body>
</html>
